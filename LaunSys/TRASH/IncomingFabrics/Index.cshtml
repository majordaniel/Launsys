
@{
    ViewBag.Title = "Incoming Fabrics";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/Scripts/Site.js"></script>
<!-- SlimScroll -->
<script src="../../bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../../bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<!-- AdminLTE for demo purposes -->
<script src="../../dist/js/demo.js"></script>
<!-- Bootstrap 3.3.7 -->
<link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<!--<link href="~/Content/bootstrap-datetimepicker.min.css" rel="stylesheet" />-->

<!-- bootstrap datepicker 
<script src="../../bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>-->
<!-- Font Awesome -->
<link rel="stylesheet" href="../../bower_components/font-awesome/css/font-awesome.min.css">
<!-- Ionicons -->
<link rel="stylesheet" href="../../bower_components/Ionicons/css/ionicons.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="../../dist/css/AdminLTE.min.css">
<!-- AdminLTE Skins. Choose a skin from the css/skins
     folder instead of downloading all of them to reduce the load. -->
<link rel="stylesheet" href="../../dist/css/skins/_all-skins.min.css">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<!-- Google Font -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">









  <!-- DataTables -->


<h2>Incoming Fabrics</h2>
<a class="btn btn-success" style="margin-bottom:10px"  onclick="PopupForm('@Url.Action("AddOrEdit","IncomingFabrics")')"><i class="fa fa-plus"></i>Add Incoming Fabric</a>
<table id="IncomingFabricsTable" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>Date</th>
            <th>Date Serial No</th>
            <th>Cust Name</th>
            <th>Invoice No</th>
            <th>Quantity</th>
            <th>Amount</th>
        </tr>
    </thead>
</table>


<link rel="stylesheet" href="../../bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">



@section scripts{
   
<!-- DataTables -->
<script src="../../bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../../bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>


<script>
    var Popup, dataTable;
    $(document).ready(function () {
        dataTable =  $("#IncomingFabricsTable").DataTable({
            "paging"      : true,
            "lengthChange": true,
            "searching"   : true,
            "ordering"    : true,
            "info"        : true,
            "autoWidth"   : true,
            "ajax": {
                "url":"/IncomingFabrics/GetData",
                "type": "GET",
                "datatype":"json"
            },
            "columns": [
                {
                    "data": "Date",
                    "render": function (jsonDate) {
                        var date = new Date(parseInt(jsonDate.substr(6)));
                        var month = date.getMonth() + 1;
                        return date.getDate() + "/" + month + "/" + date.getFullYear();
                    }
                },
                {"data":"DateSN"},
                {"data":"Cust_Name"},
                { "data":"Inv_No"},
                { "data": "Qty" },
                { "data": "Amount" },
            

                @*{ "data": "Id", "render": function (data) {
                    return "<a class='btn btn-default btn-sm' onclick=PopupForm('@Url.Action("AddOrEdit","IncomingFabrics")/" + data + ")><i class='fa fa-pencil'></i> Edit</a><a class='btn btn-danger btn-sm' style='margin-left:5px'><i class='fa fa-trash'></i> Delete</a>"
                },
                "orderable":false,
                "width": "150px",
                }*@

            ],
            "language": {
                "emptyTable":"No Data Found, Please Click on the <b>Add New</b> Button"
            }
        });
    });
    function PopupForm(url) {
        var formDiv = $('<div/>');
        $.get(url)
        .done(function (response) {
            formDiv.html(response);
            Popup = formDiv.dialog({
                autoOpen: true,
                resizeable: false,
                title: 'Fill in Incoming Fabrics Details',
                height: 500,
                width: 400,
                close: function () {
                    Popup.dialog('destroy').remove();
                }
            });
        });
    }

    function submitForm(form) {
        $.validator.unobrusive.parse(form)

    

        if ($(form).valid()) {

            $.ajax({
                type: "POST",
                url: form.action,
                data: $(form).serialize(),
                success: function (data) {
                    if (data.success) {
                        Popup.dialog('close');
                        dataTable.ajax.reload();

                        $.notify(data.message, {
                            globalPosition: "top center",
                            className: "success"
                        })
                    }
                }
            });

    
        }
        return false;
    }
</script>


}







